"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/providers/route";
exports.ids = ["app/api/providers/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproviders%2Froute&page=%2Fapi%2Fproviders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproviders%2Froute.ts&appDir=%2FUsers%2Fvyang%2FDesktop%2Fspaces%2Fmanga_learnjp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvyang%2FDesktop%2Fspaces%2Fmanga_learnjp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproviders%2Froute&page=%2Fapi%2Fproviders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproviders%2Froute.ts&appDir=%2FUsers%2Fvyang%2FDesktop%2Fspaces%2Fmanga_learnjp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvyang%2FDesktop%2Fspaces%2Fmanga_learnjp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _Users_vyang_Desktop_spaces_manga_learnjp_src_app_api_providers_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/app/api/providers/route.ts */ \"(rsc)/./src/app/api/providers/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/providers/route\",\n        pathname: \"/api/providers\",\n        filename: \"route\",\n        bundlePath: \"app/api/providers/route\"\n    },\n    resolvedPagePath: \"/Users/vyang/Desktop/spaces/manga_learnjp/src/app/api/providers/route.ts\",\n    nextConfigOutput,\n    userland: _Users_vyang_Desktop_spaces_manga_learnjp_src_app_api_providers_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/providers/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm92aWRlcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnByb3ZpZGVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnByb3ZpZGVycyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnZ5YW5nJTJGRGVza3RvcCUyRnNwYWNlcyUyRm1hbmdhX2xlYXJuanAlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGdnlhbmclMkZEZXNrdG9wJTJGc3BhY2VzJTJGbWFuZ2FfbGVhcm5qcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDc0M7QUFDckc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFuZ2EtbGVhcm5qcC8/YzA1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvdnlhbmcvRGVza3RvcC9zcGFjZXMvbWFuZ2FfbGVhcm5qcC9zcmMvYXBwL2FwaS9wcm92aWRlcnMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Byb3ZpZGVycy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb3ZpZGVyc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHJvdmlkZXJzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3Z5YW5nL0Rlc2t0b3Avc3BhY2VzL21hbmdhX2xlYXJuanAvc3JjL2FwcC9hcGkvcHJvdmlkZXJzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3Byb3ZpZGVycy9yb3V0ZVwiO1xuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproviders%2Froute&page=%2Fapi%2Fproviders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproviders%2Froute.ts&appDir=%2FUsers%2Fvyang%2FDesktop%2Fspaces%2Fmanga_learnjp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvyang%2FDesktop%2Fspaces%2Fmanga_learnjp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/providers/route.ts":
/*!****************************************!*\
  !*** ./src/app/api/providers/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_ai_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/ai-service */ \"(rsc)/./src/lib/ai-service.ts\");\n\n\nasync function GET() {\n    try {\n        const openaiApiKey = process.env.OPENAI_API_KEY;\n        const geminiApiKey = process.env.GEMINI_API_KEY;\n        const aiService = new _lib_ai_service__WEBPACK_IMPORTED_MODULE_1__.AIAnalysisService(openaiApiKey, geminiApiKey);\n        const availableProviders = aiService.getAvailableProviders();\n        // OpenAI-format is always available as it can be configured in the UI\n        if (!availableProviders.includes(\"openai-format\")) {\n            availableProviders.push(\"openai-format\");\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            providers: availableProviders,\n            default: \"openai\" || 0\n        });\n    } catch (error) {\n        console.error(\"Error checking providers:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to check available providers\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wcm92aWRlcnMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBDO0FBQ1U7QUFFN0MsZUFBZUU7SUFDcEIsSUFBSTtRQUNGLE1BQU1DLGVBQWVDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztRQUMvQyxNQUFNQyxlQUFlSCxRQUFRQyxHQUFHLENBQUNHLGNBQWM7UUFFL0MsTUFBTUMsWUFBWSxJQUFJUiw4REFBaUJBLENBQUNFLGNBQWNJO1FBQ3RELE1BQU1HLHFCQUFxQkQsVUFBVUUscUJBQXFCO1FBRTFELHNFQUFzRTtRQUN0RSxJQUFJLENBQUNELG1CQUFtQkUsUUFBUSxDQUFDLGtCQUFrQjtZQUNqREYsbUJBQW1CRyxJQUFJLENBQUM7UUFDMUI7UUFFQSxPQUFPYixrRkFBWUEsQ0FBQ2MsSUFBSSxDQUFDO1lBQ3ZCQyxXQUFXTDtZQUNYTSxTQUFTWixRQUEyQyxJQUFJO1FBQzFEO0lBQ0YsRUFBRSxPQUFPYyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU9sQixrRkFBWUEsQ0FBQ2MsSUFBSSxDQUN0QjtZQUFFSSxPQUFPO1FBQXNDLEdBQy9DO1lBQUVFLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFuZ2EtbGVhcm5qcC8uL3NyYy9hcHAvYXBpL3Byb3ZpZGVycy9yb3V0ZS50cz9kMDcyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgQUlBbmFseXNpc1NlcnZpY2UgfSBmcm9tICdAL2xpYi9haS1zZXJ2aWNlJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICB0cnkge1xuICAgIGNvbnN0IG9wZW5haUFwaUtleSA9IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZXG4gICAgY29uc3QgZ2VtaW5pQXBpS2V5ID0gcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVlcblxuICAgIGNvbnN0IGFpU2VydmljZSA9IG5ldyBBSUFuYWx5c2lzU2VydmljZShvcGVuYWlBcGlLZXksIGdlbWluaUFwaUtleSlcbiAgICBjb25zdCBhdmFpbGFibGVQcm92aWRlcnMgPSBhaVNlcnZpY2UuZ2V0QXZhaWxhYmxlUHJvdmlkZXJzKClcbiAgICBcbiAgICAvLyBPcGVuQUktZm9ybWF0IGlzIGFsd2F5cyBhdmFpbGFibGUgYXMgaXQgY2FuIGJlIGNvbmZpZ3VyZWQgaW4gdGhlIFVJXG4gICAgaWYgKCFhdmFpbGFibGVQcm92aWRlcnMuaW5jbHVkZXMoJ29wZW5haS1mb3JtYXQnKSkge1xuICAgICAgYXZhaWxhYmxlUHJvdmlkZXJzLnB1c2goJ29wZW5haS1mb3JtYXQnKVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBwcm92aWRlcnM6IGF2YWlsYWJsZVByb3ZpZGVycyxcbiAgICAgIGRlZmF1bHQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFRkFVTFRfQUlfUFJPVklERVIgfHwgJ29wZW5haSdcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIHByb3ZpZGVyczonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGNoZWNrIGF2YWlsYWJsZSBwcm92aWRlcnMnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJBSUFuYWx5c2lzU2VydmljZSIsIkdFVCIsIm9wZW5haUFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsImdlbWluaUFwaUtleSIsIkdFTUlOSV9BUElfS0VZIiwiYWlTZXJ2aWNlIiwiYXZhaWxhYmxlUHJvdmlkZXJzIiwiZ2V0QXZhaWxhYmxlUHJvdmlkZXJzIiwiaW5jbHVkZXMiLCJwdXNoIiwianNvbiIsInByb3ZpZGVycyIsImRlZmF1bHQiLCJORVhUX1BVQkxJQ19ERUZBVUxUX0FJX1BST1ZJREVSIiwiZXJyb3IiLCJjb25zb2xlIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/providers/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ai-service.ts":
/*!*******************************!*\
  !*** ./src/lib/ai-service.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIAnalysisService: () => (/* binding */ AIAnalysisService),\n/* harmony export */   GeminiService: () => (/* binding */ GeminiService),\n/* harmony export */   OpenAIFormatService: () => (/* binding */ OpenAIFormatService),\n/* harmony export */   OpenAIService: () => (/* binding */ OpenAIService)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n\nconst ANALYSIS_PROMPT = (text)=>`\nYou are a Japanese language learning assistant. ${text ? `Analyze the following Japanese text extracted from manga` : `Look at this manga image and extract all Japanese text, then analyze it`} and provide detailed explanations for language learners.\n\n${text ? `Japanese Text:\\n\"${text}\"` : \"\"}\n\nPlease provide a JSON response with the following structure:\n{\n  \"extractedText\": \"${text ? text : \"All Japanese text found in the image\"}\",\n  \"translation\": \"English translation of the text\",\n  \"summary\": \"Brief context summary explaining what's happening in this manga scene\",\n  \"words\": [\n    {\n      \"word\": \"Japanese word\",\n      \"reading\": \"hiragana/katakana reading\",\n      \"meaning\": \"English meaning\",\n      \"partOfSpeech\": \"noun/verb/adjective/etc\",\n      \"difficulty\": \"beginner/intermediate/advanced\"\n    }\n  ],\n  \"grammar\": [\n    {\n      \"pattern\": \"Grammar pattern found in text\",\n      \"explanation\": \"Detailed explanation of the grammar pattern\",\n      \"example\": \"Example sentence using this pattern\"\n    }\n  ]\n}\n\nFocus on:\n1. ${text ? \"\" : \"First, accurately extracting ALL Japanese text from the manga image (including text in speech bubbles, sound effects, signs, etc.)\"} \n2. Breaking down important vocabulary words, especially those that might be difficult for learners\n3. Identifying key grammar patterns and structures\n4. Providing context for manga-specific language or expressions\n5. Assigning appropriate difficulty levels (beginner: JLPT N5-N4, intermediate: N3-N2, advanced: N1+)\n6. Including furigana readings for kanji\n7. Explaining any colloquialisms, slang, or casual speech patterns common in manga\n8. ${text ? \"\" : \"Recognizing manga sound effects (onomatopoeia) and their meanings\"}\n\nMake sure the response is valid JSON format.`;\nconst MANGA_PANEL_ANALYSIS_PROMPT = ()=>`\nYou are a Japanese language learning assistant specialized in manga analysis. Analyze this manga image by identifying individual panels and extracting text from each panel separately.\n\nIMPORTANT: Manga panels are read from RIGHT to LEFT, TOP to BOTTOM. Please identify panels in the correct reading order.\n\nPlease provide a JSON response with the following structure:\n{\n  \"panels\": [\n    {\n      \"panelNumber\": 1,\n      \"position\": {\n        \"x\": 0,\n        \"y\": 0,\n        \"width\": 100,\n        \"height\": 100\n      },\n      \"extractedText\": \"Japanese text from this specific panel\",\n      \"translation\": \"English translation of this panel's text\",\n      \"words\": [\n        {\n          \"word\": \"Japanese word\",\n          \"reading\": \"hiragana/katakana reading\",\n          \"meaning\": \"English meaning\",\n          \"partOfSpeech\": \"noun/verb/adjective/etc\",\n          \"difficulty\": \"beginner/intermediate/advanced\"\n        }\n      ],\n      \"grammar\": [\n        {\n          \"pattern\": \"Grammar pattern found in this panel\",\n          \"explanation\": \"Detailed explanation of the grammar pattern\",\n          \"example\": \"Example sentence using this pattern\"\n        }\n      ],\n      \"context\": \"What's happening in this specific panel\"\n    }\n  ],\n  \"overallSummary\": \"Overall summary of the entire manga page/scene\",\n  \"readingOrder\": [1, 2, 3, 4]\n}\n\nFocus on:\n1. Identifying individual manga panels (speech bubbles, panel borders, distinct scenes)\n2. Reading order: RIGHT to LEFT, TOP to BOTTOM (traditional Japanese manga layout)\n3. Extracting text from each panel separately\n4. Analyzing vocabulary and grammar for each panel individually\n5. Providing context for each panel's content\n6. Including sound effects (onomatopoeia) and their meanings\n7. Recognizing different types of text (dialogue, thoughts, narration, sound effects)\n8. Difficulty levels: beginner (JLPT N5-N4), intermediate (N3-N2), advanced (N1+)\n\nMake sure the response is valid JSON format.`;\n// Helper function to clean JSON responses that might be wrapped in markdown\nfunction cleanJsonResponse(content) {\n    // Remove markdown code block wrappers if present\n    const codeBlockRegex = /```(?:json)?\\s*([\\s\\S]*?)\\s*```/;\n    const match = content.match(codeBlockRegex);\n    if (match) {\n        return match[1].trim();\n    }\n    // If no code blocks found, return original content trimmed\n    return content.trim();\n}\nclass OpenAIService {\n    constructor(apiKey, textModel = \"gpt-4-turbo-preview\", visionModel = \"gpt-4-vision-preview\"){\n        this.apiKey = apiKey;\n        this.textModel = textModel;\n        this.visionModel = visionModel;\n    }\n    async analyzeText(text) {\n        const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${this.apiKey}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                model: this.textModel,\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"You are a helpful Japanese language learning assistant that provides detailed analysis of Japanese text for learners. Always respond with valid JSON.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: ANALYSIS_PROMPT(text)\n                    }\n                ],\n                temperature: 0.3,\n                max_tokens: 2000\n            })\n        });\n        if (!response.ok) {\n            throw new Error(`OpenAI API error: ${response.status}`);\n        }\n        const data = await response.json();\n        const content = data.choices[0]?.message?.content;\n        if (!content) {\n            throw new Error(\"No content received from OpenAI\");\n        }\n        const analysisResult = JSON.parse(cleanJsonResponse(content));\n        return {\n            ...analysisResult,\n            provider: \"openai\"\n        };\n    }\n    async analyzeImage(imageBase64) {\n        const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${this.apiKey}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                model: this.visionModel,\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"You are a helpful Japanese language learning assistant that can read Japanese text from manga images and provide detailed analysis for learners. Always respond with valid JSON.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"text\",\n                                text: ANALYSIS_PROMPT()\n                            },\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: `data:image/jpeg;base64,${imageBase64}`\n                                }\n                            }\n                        ]\n                    }\n                ],\n                temperature: 0.3,\n                max_tokens: 2000\n            })\n        });\n        if (!response.ok) {\n            throw new Error(`OpenAI API error: ${response.status}`);\n        }\n        const data = await response.json();\n        const content = data.choices[0]?.message?.content;\n        if (!content) {\n            throw new Error(\"No content received from OpenAI\");\n        }\n        const analysisResult = JSON.parse(cleanJsonResponse(content));\n        return {\n            ...analysisResult,\n            provider: \"openai\"\n        };\n    }\n    async analyzeMangaImage(imageBase64) {\n        const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${this.apiKey}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                model: this.visionModel,\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"You are a helpful Japanese language learning assistant specialized in manga analysis. You can identify manga panels and extract text from each panel separately following traditional right-to-left, top-to-bottom reading order. Always respond with valid JSON.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"text\",\n                                text: MANGA_PANEL_ANALYSIS_PROMPT()\n                            },\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: `data:image/jpeg;base64,${imageBase64}`\n                                }\n                            }\n                        ]\n                    }\n                ],\n                temperature: 0.3,\n                max_tokens: 4000\n            })\n        });\n        if (!response.ok) {\n            throw new Error(`OpenAI API error: ${response.status}`);\n        }\n        const data = await response.json();\n        const content = data.choices[0]?.message?.content;\n        if (!content) {\n            throw new Error(\"No content received from OpenAI\");\n        }\n        const analysisResult = JSON.parse(cleanJsonResponse(content));\n        return {\n            ...analysisResult,\n            provider: \"openai\"\n        };\n    }\n}\nclass GeminiService {\n    constructor(apiKey, modelName = \"gemini-1.5-pro\"){\n        this.genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(apiKey);\n        this.model = this.genAI.getGenerativeModel({\n            model: modelName\n        });\n    }\n    async analyzeText(text) {\n        const prompt = ANALYSIS_PROMPT(text);\n        const result = await this.model.generateContent([\n            {\n                text: prompt\n            }\n        ]);\n        const response = await result.response;\n        const content = response.text();\n        if (!content) {\n            throw new Error(\"No content received from Gemini\");\n        }\n        const analysisResult = JSON.parse(cleanJsonResponse(content));\n        return {\n            ...analysisResult,\n            provider: \"gemini\"\n        };\n    }\n    async analyzeImage(imageBase64) {\n        const prompt = ANALYSIS_PROMPT();\n        // Convert base64 to format Gemini expects\n        const imagePart = {\n            inlineData: {\n                data: imageBase64,\n                mimeType: \"image/jpeg\"\n            }\n        };\n        const result = await this.model.generateContent([\n            prompt,\n            imagePart\n        ]);\n        const response = await result.response;\n        const content = response.text();\n        if (!content) {\n            throw new Error(\"No content received from Gemini\");\n        }\n        const analysisResult = JSON.parse(cleanJsonResponse(content));\n        return {\n            ...analysisResult,\n            provider: \"gemini\"\n        };\n    }\n    async analyzeMangaImage(imageBase64) {\n        const prompt = MANGA_PANEL_ANALYSIS_PROMPT();\n        // Convert base64 to format Gemini expects\n        const imagePart = {\n            inlineData: {\n                data: imageBase64,\n                mimeType: \"image/jpeg\"\n            }\n        };\n        const result = await this.model.generateContent([\n            prompt,\n            imagePart\n        ]);\n        const response = await result.response;\n        const content = response.text();\n        if (!content) {\n            throw new Error(\"No content received from Gemini\");\n        }\n        const analysisResult = JSON.parse(cleanJsonResponse(content));\n        return {\n            ...analysisResult,\n            provider: \"gemini\"\n        };\n    }\n}\nclass OpenAIFormatService {\n    constructor(settings){\n        this.settings = settings;\n    }\n    async analyzeText(text) {\n        const headers = {\n            \"Content-Type\": \"application/json\"\n        };\n        if (this.settings.apiKey) {\n            headers[\"Authorization\"] = `Bearer ${this.settings.apiKey}`;\n        }\n        const response = await fetch(`${this.settings.endpoint}/chat/completions`, {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify({\n                model: this.settings.model,\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"You are a helpful Japanese language learning assistant that provides detailed analysis of Japanese text for learners. Always respond with valid JSON.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: ANALYSIS_PROMPT(text)\n                    }\n                ],\n                temperature: 0.3,\n                max_tokens: 2000\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(`OpenAI-format API error: ${response.status}`, {\n                endpoint: `${this.settings.endpoint}/chat/completions`,\n                model: this.settings.model,\n                hasApiKey: !!this.settings.apiKey,\n                error: errorText\n            });\n            throw new Error(`OpenAI-format API error: ${response.status} - ${errorText}`);\n        }\n        const data = await response.json();\n        const content = data.choices[0]?.message?.content;\n        if (!content) {\n            throw new Error(\"No content received from OpenAI-format API\");\n        }\n        const analysisResult = JSON.parse(cleanJsonResponse(content));\n        return {\n            ...analysisResult,\n            provider: \"openai-format\"\n        };\n    }\n    async analyzeImage(imageBase64) {\n        const headers = {\n            \"Content-Type\": \"application/json\"\n        };\n        if (this.settings.apiKey) {\n            headers[\"Authorization\"] = `Bearer ${this.settings.apiKey}`;\n        }\n        const response = await fetch(`${this.settings.endpoint}/chat/completions`, {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify({\n                model: this.settings.model,\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"You are a helpful Japanese language learning assistant that can read Japanese text from manga images and provide detailed analysis for learners. Always respond with valid JSON.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"text\",\n                                text: ANALYSIS_PROMPT()\n                            },\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: `data:image/jpeg;base64,${imageBase64}`\n                                }\n                            }\n                        ]\n                    }\n                ],\n                temperature: 0.3,\n                max_tokens: 2000\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(`OpenAI-format API error: ${response.status}`, {\n                endpoint: `${this.settings.endpoint}/chat/completions`,\n                model: this.settings.model,\n                hasApiKey: !!this.settings.apiKey,\n                error: errorText\n            });\n            throw new Error(`OpenAI-format API error: ${response.status} - ${errorText}`);\n        }\n        const data = await response.json();\n        const content = data.choices[0]?.message?.content;\n        if (!content) {\n            throw new Error(\"No content received from OpenAI-format API\");\n        }\n        const analysisResult = JSON.parse(cleanJsonResponse(content));\n        return {\n            ...analysisResult,\n            provider: \"openai-format\"\n        };\n    }\n    async analyzeMangaImage(imageBase64) {\n        const headers = {\n            \"Content-Type\": \"application/json\"\n        };\n        if (this.settings.apiKey) {\n            headers[\"Authorization\"] = `Bearer ${this.settings.apiKey}`;\n        }\n        const response = await fetch(`${this.settings.endpoint}/chat/completions`, {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify({\n                model: this.settings.model,\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"You are a helpful Japanese language learning assistant specialized in manga analysis. You can identify manga panels and extract text from each panel separately following traditional right-to-left, top-to-bottom reading order. Always respond with valid JSON.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"text\",\n                                text: MANGA_PANEL_ANALYSIS_PROMPT()\n                            },\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: `data:image/jpeg;base64,${imageBase64}`\n                                }\n                            }\n                        ]\n                    }\n                ],\n                temperature: 0.3,\n                max_tokens: 4000\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(`OpenAI-format API error: ${response.status}`, {\n                endpoint: `${this.settings.endpoint}/chat/completions`,\n                model: this.settings.model,\n                hasApiKey: !!this.settings.apiKey,\n                error: errorText\n            });\n            throw new Error(`OpenAI-format API error: ${response.status} - ${errorText}`);\n        }\n        const data = await response.json();\n        const content = data.choices[0]?.message?.content;\n        if (!content) {\n            throw new Error(\"No content received from OpenAI-format API\");\n        }\n        const analysisResult = JSON.parse(cleanJsonResponse(content));\n        return {\n            ...analysisResult,\n            provider: \"openai-format\"\n        };\n    }\n}\nclass AIAnalysisService {\n    constructor(openaiKey, geminiKey, openaiFormatSettings, modelSettings){\n        if (openaiKey && modelSettings?.openai) {\n            this.openaiService = new OpenAIService(openaiKey, modelSettings.openai.textModel, modelSettings.openai.visionModel);\n        } else if (openaiKey) {\n            this.openaiService = new OpenAIService(openaiKey);\n        }\n        if (geminiKey && modelSettings?.gemini) {\n            this.geminiService = new GeminiService(geminiKey, modelSettings.gemini.model);\n        } else if (geminiKey) {\n            this.geminiService = new GeminiService(geminiKey);\n        }\n        if (openaiFormatSettings) {\n            this.openaiFormatService = new OpenAIFormatService(openaiFormatSettings);\n        }\n    }\n    async analyzeText(text, provider = \"openai\") {\n        if (provider === \"openai\" && this.openaiService) {\n            return await this.openaiService.analyzeText(text);\n        } else if (provider === \"gemini\" && this.geminiService) {\n            return await this.geminiService.analyzeText(text);\n        } else if (provider === \"openai-format\" && this.openaiFormatService) {\n            return await this.openaiFormatService.analyzeText(text);\n        } else {\n            throw new Error(`${provider} service not available or not configured`);\n        }\n    }\n    async analyzeImage(imageBase64, provider = \"openai\") {\n        if (provider === \"openai\" && this.openaiService) {\n            return await this.openaiService.analyzeImage(imageBase64);\n        } else if (provider === \"gemini\" && this.geminiService) {\n            return await this.geminiService.analyzeImage(imageBase64);\n        } else if (provider === \"openai-format\" && this.openaiFormatService) {\n            return await this.openaiFormatService.analyzeImage(imageBase64);\n        } else {\n            throw new Error(`${provider} service not available or not configured`);\n        }\n    }\n    async analyzeMangaImage(imageBase64, provider = \"openai\") {\n        if (provider === \"openai\" && this.openaiService) {\n            return await this.openaiService.analyzeMangaImage(imageBase64);\n        } else if (provider === \"gemini\" && this.geminiService) {\n            return await this.geminiService.analyzeMangaImage(imageBase64);\n        } else if (provider === \"openai-format\" && this.openaiFormatService) {\n            return await this.openaiFormatService.analyzeMangaImage(imageBase64);\n        } else {\n            throw new Error(`${provider} service not available or not configured`);\n        }\n    }\n    getAvailableProviders() {\n        const providers = [];\n        if (this.openaiService) providers.push(\"openai\");\n        if (this.geminiService) providers.push(\"gemini\");\n        if (this.openaiFormatService) providers.push(\"openai-format\");\n        return providers;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW1CLElBQUksQ0FBQ2lDLG1CQUFtQixFQUFFO1lBQ25FLE9BQU8sTUFBTSxJQUFJLENBQUNBLG1CQUFtQixDQUFDM0IsaUJBQWlCLENBQUNKO1FBQzFELE9BQU87WUFDTCxNQUFNLElBQUlWLE1BQU0sQ0FBQyxFQUFFUSxTQUFTLHdDQUF3QyxDQUFDO1FBQ3ZFO0lBQ0Y7SUFFQWtDLHdCQUFzQztRQUNwQyxNQUFNQyxZQUEwQixFQUFFO1FBQ2xDLElBQUksSUFBSSxDQUFDTCxhQUFhLEVBQUVLLFVBQVVDLElBQUksQ0FBQztRQUN2QyxJQUFJLElBQUksQ0FBQ0osYUFBYSxFQUFFRyxVQUFVQyxJQUFJLENBQUM7UUFDdkMsSUFBSSxJQUFJLENBQUNILG1CQUFtQixFQUFFRSxVQUFVQyxJQUFJLENBQUM7UUFDN0MsT0FBT0Q7SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFuZ2EtbGVhcm5qcC8uL3NyYy9saWIvYWktc2VydmljZS50cz9mZGU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdvb2dsZUdlbmVyYXRpdmVBSSB9IGZyb20gJ0Bnb29nbGUvZ2VuZXJhdGl2ZS1haSdcbmltcG9ydCB0eXBlIHsgQUlQcm92aWRlciwgT3BlbkFJRm9ybWF0U2V0dGluZ3MsIE1vZGVsU2V0dGluZ3MsIE1hbmdhQW5hbHlzaXNSZXN1bHQgfSBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIEFuYWx5c2lzUmVxdWVzdCB7XG4gIHRleHQ6IHN0cmluZ1xuICBwcm92aWRlcj86IEFJUHJvdmlkZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXb3JkQW5hbHlzaXMge1xuICB3b3JkOiBzdHJpbmdcbiAgcmVhZGluZzogc3RyaW5nXG4gIG1lYW5pbmc6IHN0cmluZ1xuICBwYXJ0T2ZTcGVlY2g6IHN0cmluZ1xuICBkaWZmaWN1bHR5OiAnYmVnaW5uZXInIHwgJ2ludGVybWVkaWF0ZScgfCAnYWR2YW5jZWQnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JhbW1hclBhdHRlcm4ge1xuICBwYXR0ZXJuOiBzdHJpbmdcbiAgZXhwbGFuYXRpb246IHN0cmluZ1xuICBleGFtcGxlOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbmFseXNpc1Jlc3VsdCB7XG4gIGV4dHJhY3RlZFRleHQ6IHN0cmluZ1xuICB3b3JkczogV29yZEFuYWx5c2lzW11cbiAgZ3JhbW1hcjogR3JhbW1hclBhdHRlcm5bXVxuICB0cmFuc2xhdGlvbjogc3RyaW5nXG4gIHN1bW1hcnk6IHN0cmluZ1xuICBwcm92aWRlcjogQUlQcm92aWRlclxufVxuXG5jb25zdCBBTkFMWVNJU19QUk9NUFQgPSAodGV4dD86IHN0cmluZykgPT4gYFxuWW91IGFyZSBhIEphcGFuZXNlIGxhbmd1YWdlIGxlYXJuaW5nIGFzc2lzdGFudC4gJHt0ZXh0ID8gYEFuYWx5emUgdGhlIGZvbGxvd2luZyBKYXBhbmVzZSB0ZXh0IGV4dHJhY3RlZCBmcm9tIG1hbmdhYCA6IGBMb29rIGF0IHRoaXMgbWFuZ2EgaW1hZ2UgYW5kIGV4dHJhY3QgYWxsIEphcGFuZXNlIHRleHQsIHRoZW4gYW5hbHl6ZSBpdGB9IGFuZCBwcm92aWRlIGRldGFpbGVkIGV4cGxhbmF0aW9ucyBmb3IgbGFuZ3VhZ2UgbGVhcm5lcnMuXG5cbiR7dGV4dCA/IGBKYXBhbmVzZSBUZXh0OlxcblwiJHt0ZXh0fVwiYCA6ICcnfVxuXG5QbGVhc2UgcHJvdmlkZSBhIEpTT04gcmVzcG9uc2Ugd2l0aCB0aGUgZm9sbG93aW5nIHN0cnVjdHVyZTpcbntcbiAgXCJleHRyYWN0ZWRUZXh0XCI6IFwiJHt0ZXh0ID8gdGV4dCA6ICdBbGwgSmFwYW5lc2UgdGV4dCBmb3VuZCBpbiB0aGUgaW1hZ2UnfVwiLFxuICBcInRyYW5zbGF0aW9uXCI6IFwiRW5nbGlzaCB0cmFuc2xhdGlvbiBvZiB0aGUgdGV4dFwiLFxuICBcInN1bW1hcnlcIjogXCJCcmllZiBjb250ZXh0IHN1bW1hcnkgZXhwbGFpbmluZyB3aGF0J3MgaGFwcGVuaW5nIGluIHRoaXMgbWFuZ2Egc2NlbmVcIixcbiAgXCJ3b3Jkc1wiOiBbXG4gICAge1xuICAgICAgXCJ3b3JkXCI6IFwiSmFwYW5lc2Ugd29yZFwiLFxuICAgICAgXCJyZWFkaW5nXCI6IFwiaGlyYWdhbmEva2F0YWthbmEgcmVhZGluZ1wiLFxuICAgICAgXCJtZWFuaW5nXCI6IFwiRW5nbGlzaCBtZWFuaW5nXCIsXG4gICAgICBcInBhcnRPZlNwZWVjaFwiOiBcIm5vdW4vdmVyYi9hZGplY3RpdmUvZXRjXCIsXG4gICAgICBcImRpZmZpY3VsdHlcIjogXCJiZWdpbm5lci9pbnRlcm1lZGlhdGUvYWR2YW5jZWRcIlxuICAgIH1cbiAgXSxcbiAgXCJncmFtbWFyXCI6IFtcbiAgICB7XG4gICAgICBcInBhdHRlcm5cIjogXCJHcmFtbWFyIHBhdHRlcm4gZm91bmQgaW4gdGV4dFwiLFxuICAgICAgXCJleHBsYW5hdGlvblwiOiBcIkRldGFpbGVkIGV4cGxhbmF0aW9uIG9mIHRoZSBncmFtbWFyIHBhdHRlcm5cIixcbiAgICAgIFwiZXhhbXBsZVwiOiBcIkV4YW1wbGUgc2VudGVuY2UgdXNpbmcgdGhpcyBwYXR0ZXJuXCJcbiAgICB9XG4gIF1cbn1cblxuRm9jdXMgb246XG4xLiAke3RleHQgPyAnJyA6ICdGaXJzdCwgYWNjdXJhdGVseSBleHRyYWN0aW5nIEFMTCBKYXBhbmVzZSB0ZXh0IGZyb20gdGhlIG1hbmdhIGltYWdlIChpbmNsdWRpbmcgdGV4dCBpbiBzcGVlY2ggYnViYmxlcywgc291bmQgZWZmZWN0cywgc2lnbnMsIGV0Yy4pJ30gXG4yLiBCcmVha2luZyBkb3duIGltcG9ydGFudCB2b2NhYnVsYXJ5IHdvcmRzLCBlc3BlY2lhbGx5IHRob3NlIHRoYXQgbWlnaHQgYmUgZGlmZmljdWx0IGZvciBsZWFybmVyc1xuMy4gSWRlbnRpZnlpbmcga2V5IGdyYW1tYXIgcGF0dGVybnMgYW5kIHN0cnVjdHVyZXNcbjQuIFByb3ZpZGluZyBjb250ZXh0IGZvciBtYW5nYS1zcGVjaWZpYyBsYW5ndWFnZSBvciBleHByZXNzaW9uc1xuNS4gQXNzaWduaW5nIGFwcHJvcHJpYXRlIGRpZmZpY3VsdHkgbGV2ZWxzIChiZWdpbm5lcjogSkxQVCBONS1ONCwgaW50ZXJtZWRpYXRlOiBOMy1OMiwgYWR2YW5jZWQ6IE4xKylcbjYuIEluY2x1ZGluZyBmdXJpZ2FuYSByZWFkaW5ncyBmb3Iga2FuamlcbjcuIEV4cGxhaW5pbmcgYW55IGNvbGxvcXVpYWxpc21zLCBzbGFuZywgb3IgY2FzdWFsIHNwZWVjaCBwYXR0ZXJucyBjb21tb24gaW4gbWFuZ2FcbjguICR7dGV4dCA/ICcnIDogJ1JlY29nbml6aW5nIG1hbmdhIHNvdW5kIGVmZmVjdHMgKG9ub21hdG9wb2VpYSkgYW5kIHRoZWlyIG1lYW5pbmdzJ31cblxuTWFrZSBzdXJlIHRoZSByZXNwb25zZSBpcyB2YWxpZCBKU09OIGZvcm1hdC5gXG5cbmNvbnN0IE1BTkdBX1BBTkVMX0FOQUxZU0lTX1BST01QVCA9ICgpID0+IGBcbllvdSBhcmUgYSBKYXBhbmVzZSBsYW5ndWFnZSBsZWFybmluZyBhc3Npc3RhbnQgc3BlY2lhbGl6ZWQgaW4gbWFuZ2EgYW5hbHlzaXMuIEFuYWx5emUgdGhpcyBtYW5nYSBpbWFnZSBieSBpZGVudGlmeWluZyBpbmRpdmlkdWFsIHBhbmVscyBhbmQgZXh0cmFjdGluZyB0ZXh0IGZyb20gZWFjaCBwYW5lbCBzZXBhcmF0ZWx5LlxuXG5JTVBPUlRBTlQ6IE1hbmdhIHBhbmVscyBhcmUgcmVhZCBmcm9tIFJJR0hUIHRvIExFRlQsIFRPUCB0byBCT1RUT00uIFBsZWFzZSBpZGVudGlmeSBwYW5lbHMgaW4gdGhlIGNvcnJlY3QgcmVhZGluZyBvcmRlci5cblxuUGxlYXNlIHByb3ZpZGUgYSBKU09OIHJlc3BvbnNlIHdpdGggdGhlIGZvbGxvd2luZyBzdHJ1Y3R1cmU6XG57XG4gIFwicGFuZWxzXCI6IFtcbiAgICB7XG4gICAgICBcInBhbmVsTnVtYmVyXCI6IDEsXG4gICAgICBcInBvc2l0aW9uXCI6IHtcbiAgICAgICAgXCJ4XCI6IDAsXG4gICAgICAgIFwieVwiOiAwLFxuICAgICAgICBcIndpZHRoXCI6IDEwMCxcbiAgICAgICAgXCJoZWlnaHRcIjogMTAwXG4gICAgICB9LFxuICAgICAgXCJleHRyYWN0ZWRUZXh0XCI6IFwiSmFwYW5lc2UgdGV4dCBmcm9tIHRoaXMgc3BlY2lmaWMgcGFuZWxcIixcbiAgICAgIFwidHJhbnNsYXRpb25cIjogXCJFbmdsaXNoIHRyYW5zbGF0aW9uIG9mIHRoaXMgcGFuZWwncyB0ZXh0XCIsXG4gICAgICBcIndvcmRzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwid29yZFwiOiBcIkphcGFuZXNlIHdvcmRcIixcbiAgICAgICAgICBcInJlYWRpbmdcIjogXCJoaXJhZ2FuYS9rYXRha2FuYSByZWFkaW5nXCIsXG4gICAgICAgICAgXCJtZWFuaW5nXCI6IFwiRW5nbGlzaCBtZWFuaW5nXCIsXG4gICAgICAgICAgXCJwYXJ0T2ZTcGVlY2hcIjogXCJub3VuL3ZlcmIvYWRqZWN0aXZlL2V0Y1wiLFxuICAgICAgICAgIFwiZGlmZmljdWx0eVwiOiBcImJlZ2lubmVyL2ludGVybWVkaWF0ZS9hZHZhbmNlZFwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBcImdyYW1tYXJcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJwYXR0ZXJuXCI6IFwiR3JhbW1hciBwYXR0ZXJuIGZvdW5kIGluIHRoaXMgcGFuZWxcIixcbiAgICAgICAgICBcImV4cGxhbmF0aW9uXCI6IFwiRGV0YWlsZWQgZXhwbGFuYXRpb24gb2YgdGhlIGdyYW1tYXIgcGF0dGVyblwiLFxuICAgICAgICAgIFwiZXhhbXBsZVwiOiBcIkV4YW1wbGUgc2VudGVuY2UgdXNpbmcgdGhpcyBwYXR0ZXJuXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFwiY29udGV4dFwiOiBcIldoYXQncyBoYXBwZW5pbmcgaW4gdGhpcyBzcGVjaWZpYyBwYW5lbFwiXG4gICAgfVxuICBdLFxuICBcIm92ZXJhbGxTdW1tYXJ5XCI6IFwiT3ZlcmFsbCBzdW1tYXJ5IG9mIHRoZSBlbnRpcmUgbWFuZ2EgcGFnZS9zY2VuZVwiLFxuICBcInJlYWRpbmdPcmRlclwiOiBbMSwgMiwgMywgNF1cbn1cblxuRm9jdXMgb246XG4xLiBJZGVudGlmeWluZyBpbmRpdmlkdWFsIG1hbmdhIHBhbmVscyAoc3BlZWNoIGJ1YmJsZXMsIHBhbmVsIGJvcmRlcnMsIGRpc3RpbmN0IHNjZW5lcylcbjIuIFJlYWRpbmcgb3JkZXI6IFJJR0hUIHRvIExFRlQsIFRPUCB0byBCT1RUT00gKHRyYWRpdGlvbmFsIEphcGFuZXNlIG1hbmdhIGxheW91dClcbjMuIEV4dHJhY3RpbmcgdGV4dCBmcm9tIGVhY2ggcGFuZWwgc2VwYXJhdGVseVxuNC4gQW5hbHl6aW5nIHZvY2FidWxhcnkgYW5kIGdyYW1tYXIgZm9yIGVhY2ggcGFuZWwgaW5kaXZpZHVhbGx5XG41LiBQcm92aWRpbmcgY29udGV4dCBmb3IgZWFjaCBwYW5lbCdzIGNvbnRlbnRcbjYuIEluY2x1ZGluZyBzb3VuZCBlZmZlY3RzIChvbm9tYXRvcG9laWEpIGFuZCB0aGVpciBtZWFuaW5nc1xuNy4gUmVjb2duaXppbmcgZGlmZmVyZW50IHR5cGVzIG9mIHRleHQgKGRpYWxvZ3VlLCB0aG91Z2h0cywgbmFycmF0aW9uLCBzb3VuZCBlZmZlY3RzKVxuOC4gRGlmZmljdWx0eSBsZXZlbHM6IGJlZ2lubmVyIChKTFBUIE41LU40KSwgaW50ZXJtZWRpYXRlIChOMy1OMiksIGFkdmFuY2VkIChOMSspXG5cbk1ha2Ugc3VyZSB0aGUgcmVzcG9uc2UgaXMgdmFsaWQgSlNPTiBmb3JtYXQuYFxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2xlYW4gSlNPTiByZXNwb25zZXMgdGhhdCBtaWdodCBiZSB3cmFwcGVkIGluIG1hcmtkb3duXG5mdW5jdGlvbiBjbGVhbkpzb25SZXNwb25zZShjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAvLyBSZW1vdmUgbWFya2Rvd24gY29kZSBibG9jayB3cmFwcGVycyBpZiBwcmVzZW50XG4gIGNvbnN0IGNvZGVCbG9ja1JlZ2V4ID0gL2BgYCg/Ompzb24pP1xccyooW1xcc1xcU10qPylcXHMqYGBgL1xuICBjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goY29kZUJsb2NrUmVnZXgpXG4gIFxuICBpZiAobWF0Y2gpIHtcbiAgICByZXR1cm4gbWF0Y2hbMV0udHJpbSgpXG4gIH1cbiAgXG4gIC8vIElmIG5vIGNvZGUgYmxvY2tzIGZvdW5kLCByZXR1cm4gb3JpZ2luYWwgY29udGVudCB0cmltbWVkXG4gIHJldHVybiBjb250ZW50LnRyaW0oKVxufVxuXG5leHBvcnQgY2xhc3MgT3BlbkFJU2VydmljZSB7XG4gIHByaXZhdGUgYXBpS2V5OiBzdHJpbmdcbiAgcHJpdmF0ZSB0ZXh0TW9kZWw6IHN0cmluZ1xuICBwcml2YXRlIHZpc2lvbk1vZGVsOiBzdHJpbmdcblxuICBjb25zdHJ1Y3RvcihhcGlLZXk6IHN0cmluZywgdGV4dE1vZGVsID0gJ2dwdC00LXR1cmJvLXByZXZpZXcnLCB2aXNpb25Nb2RlbCA9ICdncHQtNC12aXNpb24tcHJldmlldycpIHtcbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleVxuICAgIHRoaXMudGV4dE1vZGVsID0gdGV4dE1vZGVsXG4gICAgdGhpcy52aXNpb25Nb2RlbCA9IHZpc2lvbk1vZGVsXG4gIH1cblxuICBhc3luYyBhbmFseXplVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPEFuYWx5c2lzUmVzdWx0PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogdGhpcy50ZXh0TW9kZWwsXG4gICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgICAgICBjb250ZW50OiAnWW91IGFyZSBhIGhlbHBmdWwgSmFwYW5lc2UgbGFuZ3VhZ2UgbGVhcm5pbmcgYXNzaXN0YW50IHRoYXQgcHJvdmlkZXMgZGV0YWlsZWQgYW5hbHlzaXMgb2YgSmFwYW5lc2UgdGV4dCBmb3IgbGVhcm5lcnMuIEFsd2F5cyByZXNwb25kIHdpdGggdmFsaWQgSlNPTi4nXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICBjb250ZW50OiBBTkFMWVNJU19QUk9NUFQodGV4dClcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjMsXG4gICAgICAgIG1heF90b2tlbnM6IDIwMDAsXG4gICAgICB9KSxcbiAgICB9KVxuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBPcGVuQUkgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKVxuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICBjb25zdCBjb250ZW50ID0gZGF0YS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50XG5cbiAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29udGVudCByZWNlaXZlZCBmcm9tIE9wZW5BSScpXG4gICAgfVxuXG4gICAgY29uc3QgYW5hbHlzaXNSZXN1bHQgPSBKU09OLnBhcnNlKGNsZWFuSnNvblJlc3BvbnNlKGNvbnRlbnQpKVxuICAgIHJldHVybiB7XG4gICAgICAuLi5hbmFseXNpc1Jlc3VsdCxcbiAgICAgIHByb3ZpZGVyOiAnb3BlbmFpJyBhcyBBSVByb3ZpZGVyXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYW5hbHl6ZUltYWdlKGltYWdlQmFzZTY0OiBzdHJpbmcpOiBQcm9taXNlPEFuYWx5c2lzUmVzdWx0PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogdGhpcy52aXNpb25Nb2RlbCxcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiAnc3lzdGVtJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBKYXBhbmVzZSBsYW5ndWFnZSBsZWFybmluZyBhc3Npc3RhbnQgdGhhdCBjYW4gcmVhZCBKYXBhbmVzZSB0ZXh0IGZyb20gbWFuZ2EgaW1hZ2VzIGFuZCBwcm92aWRlIGRldGFpbGVkIGFuYWx5c2lzIGZvciBsZWFybmVycy4gQWx3YXlzIHJlc3BvbmQgd2l0aCB2YWxpZCBKU09OLidcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBBTkFMWVNJU19QUk9NUFQoKVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlX3VybCcsXG4gICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiB7XG4gICAgICAgICAgICAgICAgICB1cmw6IGBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCR7aW1hZ2VCYXNlNjR9YFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuMyxcbiAgICAgICAgbWF4X3Rva2VuczogMjAwMCxcbiAgICAgIH0pLFxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wZW5BSSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApXG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnRcblxuICAgIGlmICghY29udGVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb250ZW50IHJlY2VpdmVkIGZyb20gT3BlbkFJJylcbiAgICB9XG5cbiAgICBjb25zdCBhbmFseXNpc1Jlc3VsdCA9IEpTT04ucGFyc2UoY2xlYW5Kc29uUmVzcG9uc2UoY29udGVudCkpXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmFuYWx5c2lzUmVzdWx0LFxuICAgICAgcHJvdmlkZXI6ICdvcGVuYWknIGFzIEFJUHJvdmlkZXJcbiAgICB9XG4gIH1cblxuICBhc3luYyBhbmFseXplTWFuZ2FJbWFnZShpbWFnZUJhc2U2NDogc3RyaW5nKTogUHJvbWlzZTxNYW5nYUFuYWx5c2lzUmVzdWx0PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogdGhpcy52aXNpb25Nb2RlbCxcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiAnc3lzdGVtJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBKYXBhbmVzZSBsYW5ndWFnZSBsZWFybmluZyBhc3Npc3RhbnQgc3BlY2lhbGl6ZWQgaW4gbWFuZ2EgYW5hbHlzaXMuIFlvdSBjYW4gaWRlbnRpZnkgbWFuZ2EgcGFuZWxzIGFuZCBleHRyYWN0IHRleHQgZnJvbSBlYWNoIHBhbmVsIHNlcGFyYXRlbHkgZm9sbG93aW5nIHRyYWRpdGlvbmFsIHJpZ2h0LXRvLWxlZnQsIHRvcC10by1ib3R0b20gcmVhZGluZyBvcmRlci4gQWx3YXlzIHJlc3BvbmQgd2l0aCB2YWxpZCBKU09OLidcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBNQU5HQV9QQU5FTF9BTkFMWVNJU19QUk9NUFQoKVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlX3VybCcsXG4gICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiB7XG4gICAgICAgICAgICAgICAgICB1cmw6IGBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCR7aW1hZ2VCYXNlNjR9YFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuMyxcbiAgICAgICAgbWF4X3Rva2VuczogNDAwMCxcbiAgICAgIH0pLFxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wZW5BSSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApXG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnRcblxuICAgIGlmICghY29udGVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb250ZW50IHJlY2VpdmVkIGZyb20gT3BlbkFJJylcbiAgICB9XG5cbiAgICBjb25zdCBhbmFseXNpc1Jlc3VsdCA9IEpTT04ucGFyc2UoY2xlYW5Kc29uUmVzcG9uc2UoY29udGVudCkpXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmFuYWx5c2lzUmVzdWx0LFxuICAgICAgcHJvdmlkZXI6ICdvcGVuYWknIGFzIEFJUHJvdmlkZXJcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdlbWluaVNlcnZpY2Uge1xuICBwcml2YXRlIGdlbkFJOiBHb29nbGVHZW5lcmF0aXZlQUlcbiAgcHJpdmF0ZSBtb2RlbDogYW55XG5cbiAgY29uc3RydWN0b3IoYXBpS2V5OiBzdHJpbmcsIG1vZGVsTmFtZSA9ICdnZW1pbmktMS41LXBybycpIHtcbiAgICB0aGlzLmdlbkFJID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSShhcGlLZXkpXG4gICAgdGhpcy5tb2RlbCA9IHRoaXMuZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHsgbW9kZWw6IG1vZGVsTmFtZSB9KVxuICB9XG5cbiAgYXN5bmMgYW5hbHl6ZVRleHQodGV4dDogc3RyaW5nKTogUHJvbWlzZTxBbmFseXNpc1Jlc3VsdD4ge1xuICAgIGNvbnN0IHByb21wdCA9IEFOQUxZU0lTX1BST01QVCh0ZXh0KVxuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubW9kZWwuZ2VuZXJhdGVDb250ZW50KFtcbiAgICAgIHtcbiAgICAgICAgdGV4dDogcHJvbXB0XG4gICAgICB9XG4gICAgXSlcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzdWx0LnJlc3BvbnNlXG4gICAgY29uc3QgY29udGVudCA9IHJlc3BvbnNlLnRleHQoKVxuXG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbnRlbnQgcmVjZWl2ZWQgZnJvbSBHZW1pbmknKVxuICAgIH1cblxuICAgIGNvbnN0IGFuYWx5c2lzUmVzdWx0ID0gSlNPTi5wYXJzZShjbGVhbkpzb25SZXNwb25zZShjb250ZW50KSlcbiAgICByZXR1cm4ge1xuICAgICAgLi4uYW5hbHlzaXNSZXN1bHQsXG4gICAgICBwcm92aWRlcjogJ2dlbWluaScgYXMgQUlQcm92aWRlclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFuYWx5emVJbWFnZShpbWFnZUJhc2U2NDogc3RyaW5nKTogUHJvbWlzZTxBbmFseXNpc1Jlc3VsdD4ge1xuICAgIGNvbnN0IHByb21wdCA9IEFOQUxZU0lTX1BST01QVCgpXG4gICAgXG4gICAgLy8gQ29udmVydCBiYXNlNjQgdG8gZm9ybWF0IEdlbWluaSBleHBlY3RzXG4gICAgY29uc3QgaW1hZ2VQYXJ0ID0ge1xuICAgICAgaW5saW5lRGF0YToge1xuICAgICAgICBkYXRhOiBpbWFnZUJhc2U2NCxcbiAgICAgICAgbWltZVR5cGU6ICdpbWFnZS9qcGVnJ1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubW9kZWwuZ2VuZXJhdGVDb250ZW50KFtcbiAgICAgIHByb21wdCxcbiAgICAgIGltYWdlUGFydFxuICAgIF0pXG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5yZXNwb25zZVxuICAgIGNvbnN0IGNvbnRlbnQgPSByZXNwb25zZS50ZXh0KClcblxuICAgIGlmICghY29udGVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb250ZW50IHJlY2VpdmVkIGZyb20gR2VtaW5pJylcbiAgICB9XG5cbiAgICBjb25zdCBhbmFseXNpc1Jlc3VsdCA9IEpTT04ucGFyc2UoY2xlYW5Kc29uUmVzcG9uc2UoY29udGVudCkpXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmFuYWx5c2lzUmVzdWx0LFxuICAgICAgcHJvdmlkZXI6ICdnZW1pbmknIGFzIEFJUHJvdmlkZXJcbiAgICB9XG4gIH1cblxuICBhc3luYyBhbmFseXplTWFuZ2FJbWFnZShpbWFnZUJhc2U2NDogc3RyaW5nKTogUHJvbWlzZTxNYW5nYUFuYWx5c2lzUmVzdWx0PiB7XG4gICAgY29uc3QgcHJvbXB0ID0gTUFOR0FfUEFORUxfQU5BTFlTSVNfUFJPTVBUKClcbiAgICBcbiAgICAvLyBDb252ZXJ0IGJhc2U2NCB0byBmb3JtYXQgR2VtaW5pIGV4cGVjdHNcbiAgICBjb25zdCBpbWFnZVBhcnQgPSB7XG4gICAgICBpbmxpbmVEYXRhOiB7XG4gICAgICAgIGRhdGE6IGltYWdlQmFzZTY0LFxuICAgICAgICBtaW1lVHlwZTogJ2ltYWdlL2pwZWcnXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tb2RlbC5nZW5lcmF0ZUNvbnRlbnQoW1xuICAgICAgcHJvbXB0LFxuICAgICAgaW1hZ2VQYXJ0XG4gICAgXSlcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzdWx0LnJlc3BvbnNlXG4gICAgY29uc3QgY29udGVudCA9IHJlc3BvbnNlLnRleHQoKVxuXG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbnRlbnQgcmVjZWl2ZWQgZnJvbSBHZW1pbmknKVxuICAgIH1cblxuICAgIGNvbnN0IGFuYWx5c2lzUmVzdWx0ID0gSlNPTi5wYXJzZShjbGVhbkpzb25SZXNwb25zZShjb250ZW50KSlcbiAgICByZXR1cm4ge1xuICAgICAgLi4uYW5hbHlzaXNSZXN1bHQsXG4gICAgICBwcm92aWRlcjogJ2dlbWluaScgYXMgQUlQcm92aWRlclxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgT3BlbkFJRm9ybWF0U2VydmljZSB7XG4gIHByaXZhdGUgc2V0dGluZ3M6IE9wZW5BSUZvcm1hdFNldHRpbmdzXG5cbiAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IE9wZW5BSUZvcm1hdFNldHRpbmdzKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzXG4gIH1cblxuICBhc3luYyBhbmFseXplVGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPEFuYWx5c2lzUmVzdWx0PiB7XG4gICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmFwaUtleSkge1xuICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuc2V0dGluZ3MuYXBpS2V5fWBcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuc2V0dGluZ3MuZW5kcG9pbnR9L2NoYXQvY29tcGxldGlvbnNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG1vZGVsOiB0aGlzLnNldHRpbmdzLm1vZGVsLFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxuICAgICAgICAgICAgY29udGVudDogJ1lvdSBhcmUgYSBoZWxwZnVsIEphcGFuZXNlIGxhbmd1YWdlIGxlYXJuaW5nIGFzc2lzdGFudCB0aGF0IHByb3ZpZGVzIGRldGFpbGVkIGFuYWx5c2lzIG9mIEphcGFuZXNlIHRleHQgZm9yIGxlYXJuZXJzLiBBbHdheXMgcmVzcG9uZCB3aXRoIHZhbGlkIEpTT04uJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgY29udGVudDogQU5BTFlTSVNfUFJPTVBUKHRleHQpXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxuICAgICAgICBtYXhfdG9rZW5zOiAyMDAwLFxuICAgICAgfSksXG4gICAgfSlcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgY29uc29sZS5lcnJvcihgT3BlbkFJLWZvcm1hdCBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWAsIHsgXG4gICAgICAgIGVuZHBvaW50OiBgJHt0aGlzLnNldHRpbmdzLmVuZHBvaW50fS9jaGF0L2NvbXBsZXRpb25zYCxcbiAgICAgICAgbW9kZWw6IHRoaXMuc2V0dGluZ3MubW9kZWwsXG4gICAgICAgIGhhc0FwaUtleTogISF0aGlzLnNldHRpbmdzLmFwaUtleSxcbiAgICAgICAgZXJyb3I6IGVycm9yVGV4dCBcbiAgICAgIH0pXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wZW5BSS1mb3JtYXQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gKVxuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICBjb25zdCBjb250ZW50ID0gZGF0YS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50XG5cbiAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29udGVudCByZWNlaXZlZCBmcm9tIE9wZW5BSS1mb3JtYXQgQVBJJylcbiAgICB9XG5cbiAgICBjb25zdCBhbmFseXNpc1Jlc3VsdCA9IEpTT04ucGFyc2UoY2xlYW5Kc29uUmVzcG9uc2UoY29udGVudCkpXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmFuYWx5c2lzUmVzdWx0LFxuICAgICAgcHJvdmlkZXI6ICdvcGVuYWktZm9ybWF0JyBhcyBBSVByb3ZpZGVyXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYW5hbHl6ZUltYWdlKGltYWdlQmFzZTY0OiBzdHJpbmcpOiBQcm9taXNlPEFuYWx5c2lzUmVzdWx0PiB7XG4gICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmFwaUtleSkge1xuICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuc2V0dGluZ3MuYXBpS2V5fWBcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuc2V0dGluZ3MuZW5kcG9pbnR9L2NoYXQvY29tcGxldGlvbnNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG1vZGVsOiB0aGlzLnNldHRpbmdzLm1vZGVsLFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxuICAgICAgICAgICAgY29udGVudDogJ1lvdSBhcmUgYSBoZWxwZnVsIEphcGFuZXNlIGxhbmd1YWdlIGxlYXJuaW5nIGFzc2lzdGFudCB0aGF0IGNhbiByZWFkIEphcGFuZXNlIHRleHQgZnJvbSBtYW5nYSBpbWFnZXMgYW5kIHByb3ZpZGUgZGV0YWlsZWQgYW5hbHlzaXMgZm9yIGxlYXJuZXJzLiBBbHdheXMgcmVzcG9uZCB3aXRoIHZhbGlkIEpTT04uJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgIHRleHQ6IEFOQUxZU0lTX1BST01QVCgpXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2VfdXJsJyxcbiAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHtcbiAgICAgICAgICAgICAgICAgIHVybDogYGRhdGE6aW1hZ2UvanBlZztiYXNlNjQsJHtpbWFnZUJhc2U2NH1gXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxuICAgICAgICBtYXhfdG9rZW5zOiAyMDAwLFxuICAgICAgfSksXG4gICAgfSlcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgY29uc29sZS5lcnJvcihgT3BlbkFJLWZvcm1hdCBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWAsIHsgXG4gICAgICAgIGVuZHBvaW50OiBgJHt0aGlzLnNldHRpbmdzLmVuZHBvaW50fS9jaGF0L2NvbXBsZXRpb25zYCxcbiAgICAgICAgbW9kZWw6IHRoaXMuc2V0dGluZ3MubW9kZWwsXG4gICAgICAgIGhhc0FwaUtleTogISF0aGlzLnNldHRpbmdzLmFwaUtleSxcbiAgICAgICAgZXJyb3I6IGVycm9yVGV4dCBcbiAgICAgIH0pXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wZW5BSS1mb3JtYXQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gKVxuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICBjb25zdCBjb250ZW50ID0gZGF0YS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50XG5cbiAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29udGVudCByZWNlaXZlZCBmcm9tIE9wZW5BSS1mb3JtYXQgQVBJJylcbiAgICB9XG5cbiAgICBjb25zdCBhbmFseXNpc1Jlc3VsdCA9IEpTT04ucGFyc2UoY2xlYW5Kc29uUmVzcG9uc2UoY29udGVudCkpXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmFuYWx5c2lzUmVzdWx0LFxuICAgICAgcHJvdmlkZXI6ICdvcGVuYWktZm9ybWF0JyBhcyBBSVByb3ZpZGVyXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYW5hbHl6ZU1hbmdhSW1hZ2UoaW1hZ2VCYXNlNjQ6IHN0cmluZyk6IFByb21pc2U8TWFuZ2FBbmFseXNpc1Jlc3VsdD4ge1xuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5hcGlLZXkpIHtcbiAgICAgIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0aGlzLnNldHRpbmdzLmFwaUtleX1gXG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLnNldHRpbmdzLmVuZHBvaW50fS9jaGF0L2NvbXBsZXRpb25zYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogdGhpcy5zZXR0aW5ncy5tb2RlbCxcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiAnc3lzdGVtJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBKYXBhbmVzZSBsYW5ndWFnZSBsZWFybmluZyBhc3Npc3RhbnQgc3BlY2lhbGl6ZWQgaW4gbWFuZ2EgYW5hbHlzaXMuIFlvdSBjYW4gaWRlbnRpZnkgbWFuZ2EgcGFuZWxzIGFuZCBleHRyYWN0IHRleHQgZnJvbSBlYWNoIHBhbmVsIHNlcGFyYXRlbHkgZm9sbG93aW5nIHRyYWRpdGlvbmFsIHJpZ2h0LXRvLWxlZnQsIHRvcC10by1ib3R0b20gcmVhZGluZyBvcmRlci4gQWx3YXlzIHJlc3BvbmQgd2l0aCB2YWxpZCBKU09OLidcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBNQU5HQV9QQU5FTF9BTkFMWVNJU19QUk9NUFQoKVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlX3VybCcsXG4gICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiB7XG4gICAgICAgICAgICAgICAgICB1cmw6IGBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCR7aW1hZ2VCYXNlNjR9YFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuMyxcbiAgICAgICAgbWF4X3Rva2VuczogNDAwMCxcbiAgICAgIH0pLFxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcbiAgICAgIGNvbnNvbGUuZXJyb3IoYE9wZW5BSS1mb3JtYXQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gLCB7IFxuICAgICAgICBlbmRwb2ludDogYCR7dGhpcy5zZXR0aW5ncy5lbmRwb2ludH0vY2hhdC9jb21wbGV0aW9uc2AsXG4gICAgICAgIG1vZGVsOiB0aGlzLnNldHRpbmdzLm1vZGVsLFxuICAgICAgICBoYXNBcGlLZXk6ICEhdGhpcy5zZXR0aW5ncy5hcGlLZXksXG4gICAgICAgIGVycm9yOiBlcnJvclRleHQgXG4gICAgICB9KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBPcGVuQUktZm9ybWF0IEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YClcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgY29uc3QgY29udGVudCA9IGRhdGEuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudFxuXG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbnRlbnQgcmVjZWl2ZWQgZnJvbSBPcGVuQUktZm9ybWF0IEFQSScpXG4gICAgfVxuXG4gICAgY29uc3QgYW5hbHlzaXNSZXN1bHQgPSBKU09OLnBhcnNlKGNsZWFuSnNvblJlc3BvbnNlKGNvbnRlbnQpKVxuICAgIHJldHVybiB7XG4gICAgICAuLi5hbmFseXNpc1Jlc3VsdCxcbiAgICAgIHByb3ZpZGVyOiAnb3BlbmFpLWZvcm1hdCcgYXMgQUlQcm92aWRlclxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQUlBbmFseXNpc1NlcnZpY2Uge1xuICBwcml2YXRlIG9wZW5haVNlcnZpY2U/OiBPcGVuQUlTZXJ2aWNlXG4gIHByaXZhdGUgZ2VtaW5pU2VydmljZT86IEdlbWluaVNlcnZpY2VcbiAgcHJpdmF0ZSBvcGVuYWlGb3JtYXRTZXJ2aWNlPzogT3BlbkFJRm9ybWF0U2VydmljZVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG9wZW5haUtleT86IHN0cmluZywgXG4gICAgZ2VtaW5pS2V5Pzogc3RyaW5nLCBcbiAgICBvcGVuYWlGb3JtYXRTZXR0aW5ncz86IE9wZW5BSUZvcm1hdFNldHRpbmdzLFxuICAgIG1vZGVsU2V0dGluZ3M/OiBNb2RlbFNldHRpbmdzXG4gICkge1xuICAgIGlmIChvcGVuYWlLZXkgJiYgbW9kZWxTZXR0aW5ncz8ub3BlbmFpKSB7XG4gICAgICB0aGlzLm9wZW5haVNlcnZpY2UgPSBuZXcgT3BlbkFJU2VydmljZShcbiAgICAgICAgb3BlbmFpS2V5LCBcbiAgICAgICAgbW9kZWxTZXR0aW5ncy5vcGVuYWkudGV4dE1vZGVsLCBcbiAgICAgICAgbW9kZWxTZXR0aW5ncy5vcGVuYWkudmlzaW9uTW9kZWxcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKG9wZW5haUtleSkge1xuICAgICAgdGhpcy5vcGVuYWlTZXJ2aWNlID0gbmV3IE9wZW5BSVNlcnZpY2Uob3BlbmFpS2V5KVxuICAgIH1cbiAgICBcbiAgICBpZiAoZ2VtaW5pS2V5ICYmIG1vZGVsU2V0dGluZ3M/LmdlbWluaSkge1xuICAgICAgdGhpcy5nZW1pbmlTZXJ2aWNlID0gbmV3IEdlbWluaVNlcnZpY2UoZ2VtaW5pS2V5LCBtb2RlbFNldHRpbmdzLmdlbWluaS5tb2RlbClcbiAgICB9IGVsc2UgaWYgKGdlbWluaUtleSkge1xuICAgICAgdGhpcy5nZW1pbmlTZXJ2aWNlID0gbmV3IEdlbWluaVNlcnZpY2UoZ2VtaW5pS2V5KVxuICAgIH1cbiAgICBcbiAgICBpZiAob3BlbmFpRm9ybWF0U2V0dGluZ3MpIHtcbiAgICAgIHRoaXMub3BlbmFpRm9ybWF0U2VydmljZSA9IG5ldyBPcGVuQUlGb3JtYXRTZXJ2aWNlKG9wZW5haUZvcm1hdFNldHRpbmdzKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFuYWx5emVUZXh0KHRleHQ6IHN0cmluZywgcHJvdmlkZXI6IEFJUHJvdmlkZXIgPSAnb3BlbmFpJyk6IFByb21pc2U8QW5hbHlzaXNSZXN1bHQ+IHtcbiAgICBpZiAocHJvdmlkZXIgPT09ICdvcGVuYWknICYmIHRoaXMub3BlbmFpU2VydmljZSkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMub3BlbmFpU2VydmljZS5hbmFseXplVGV4dCh0ZXh0KVxuICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdnZW1pbmknICYmIHRoaXMuZ2VtaW5pU2VydmljZSkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2VtaW5pU2VydmljZS5hbmFseXplVGV4dCh0ZXh0KVxuICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdvcGVuYWktZm9ybWF0JyAmJiB0aGlzLm9wZW5haUZvcm1hdFNlcnZpY2UpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLm9wZW5haUZvcm1hdFNlcnZpY2UuYW5hbHl6ZVRleHQodGV4dClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3Byb3ZpZGVyfSBzZXJ2aWNlIG5vdCBhdmFpbGFibGUgb3Igbm90IGNvbmZpZ3VyZWRgKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFuYWx5emVJbWFnZShpbWFnZUJhc2U2NDogc3RyaW5nLCBwcm92aWRlcjogQUlQcm92aWRlciA9ICdvcGVuYWknKTogUHJvbWlzZTxBbmFseXNpc1Jlc3VsdD4ge1xuICAgIGlmIChwcm92aWRlciA9PT0gJ29wZW5haScgJiYgdGhpcy5vcGVuYWlTZXJ2aWNlKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5vcGVuYWlTZXJ2aWNlLmFuYWx5emVJbWFnZShpbWFnZUJhc2U2NClcbiAgICB9IGVsc2UgaWYgKHByb3ZpZGVyID09PSAnZ2VtaW5pJyAmJiB0aGlzLmdlbWluaVNlcnZpY2UpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdlbWluaVNlcnZpY2UuYW5hbHl6ZUltYWdlKGltYWdlQmFzZTY0KVxuICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdvcGVuYWktZm9ybWF0JyAmJiB0aGlzLm9wZW5haUZvcm1hdFNlcnZpY2UpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLm9wZW5haUZvcm1hdFNlcnZpY2UuYW5hbHl6ZUltYWdlKGltYWdlQmFzZTY0KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cHJvdmlkZXJ9IHNlcnZpY2Ugbm90IGF2YWlsYWJsZSBvciBub3QgY29uZmlndXJlZGApXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYW5hbHl6ZU1hbmdhSW1hZ2UoaW1hZ2VCYXNlNjQ6IHN0cmluZywgcHJvdmlkZXI6IEFJUHJvdmlkZXIgPSAnb3BlbmFpJyk6IFByb21pc2U8TWFuZ2FBbmFseXNpc1Jlc3VsdD4ge1xuICAgIGlmIChwcm92aWRlciA9PT0gJ29wZW5haScgJiYgdGhpcy5vcGVuYWlTZXJ2aWNlKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5vcGVuYWlTZXJ2aWNlLmFuYWx5emVNYW5nYUltYWdlKGltYWdlQmFzZTY0KVxuICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdnZW1pbmknICYmIHRoaXMuZ2VtaW5pU2VydmljZSkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2VtaW5pU2VydmljZS5hbmFseXplTWFuZ2FJbWFnZShpbWFnZUJhc2U2NClcbiAgICB9IGVsc2UgaWYgKHByb3ZpZGVyID09PSAnb3BlbmFpLWZvcm1hdCcgJiYgdGhpcy5vcGVuYWlGb3JtYXRTZXJ2aWNlKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5vcGVuYWlGb3JtYXRTZXJ2aWNlLmFuYWx5emVNYW5nYUltYWdlKGltYWdlQmFzZTY0KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cHJvdmlkZXJ9IHNlcnZpY2Ugbm90IGF2YWlsYWJsZSBvciBub3QgY29uZmlndXJlZGApXG4gICAgfVxuICB9XG5cbiAgZ2V0QXZhaWxhYmxlUHJvdmlkZXJzKCk6IEFJUHJvdmlkZXJbXSB7XG4gICAgY29uc3QgcHJvdmlkZXJzOiBBSVByb3ZpZGVyW10gPSBbXVxuICAgIGlmICh0aGlzLm9wZW5haVNlcnZpY2UpIHByb3ZpZGVycy5wdXNoKCdvcGVuYWknKVxuICAgIGlmICh0aGlzLmdlbWluaVNlcnZpY2UpIHByb3ZpZGVycy5wdXNoKCdnZW1pbmknKVxuICAgIGlmICh0aGlzLm9wZW5haUZvcm1hdFNlcnZpY2UpIHByb3ZpZGVycy5wdXNoKCdvcGVuYWktZm9ybWF0JylcbiAgICByZXR1cm4gcHJvdmlkZXJzXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJHb29nbGVHZW5lcmF0aXZlQUkiLCJBTkFMWVNJU19QUk9NUFQiLCJ0ZXh0IiwiTUFOR0FfUEFORUxfQU5BTFlTSVNfUFJPTVBUIiwiY2xlYW5Kc29uUmVzcG9uc2UiLCJjb250ZW50IiwiY29kZUJsb2NrUmVnZXgiLCJtYXRjaCIsInRyaW0iLCJPcGVuQUlTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJhcGlLZXkiLCJ0ZXh0TW9kZWwiLCJ2aXNpb25Nb2RlbCIsImFuYWx5emVUZXh0IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwib2siLCJFcnJvciIsInN0YXR1cyIsImRhdGEiLCJqc29uIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJhbmFseXNpc1Jlc3VsdCIsInBhcnNlIiwicHJvdmlkZXIiLCJhbmFseXplSW1hZ2UiLCJpbWFnZUJhc2U2NCIsInR5cGUiLCJpbWFnZV91cmwiLCJ1cmwiLCJhbmFseXplTWFuZ2FJbWFnZSIsIkdlbWluaVNlcnZpY2UiLCJtb2RlbE5hbWUiLCJnZW5BSSIsImdldEdlbmVyYXRpdmVNb2RlbCIsInByb21wdCIsInJlc3VsdCIsImdlbmVyYXRlQ29udGVudCIsImltYWdlUGFydCIsImlubGluZURhdGEiLCJtaW1lVHlwZSIsIk9wZW5BSUZvcm1hdFNlcnZpY2UiLCJzZXR0aW5ncyIsImVuZHBvaW50IiwiZXJyb3JUZXh0IiwiY29uc29sZSIsImVycm9yIiwiaGFzQXBpS2V5IiwiQUlBbmFseXNpc1NlcnZpY2UiLCJvcGVuYWlLZXkiLCJnZW1pbmlLZXkiLCJvcGVuYWlGb3JtYXRTZXR0aW5ncyIsIm1vZGVsU2V0dGluZ3MiLCJvcGVuYWkiLCJvcGVuYWlTZXJ2aWNlIiwiZ2VtaW5pIiwiZ2VtaW5pU2VydmljZSIsIm9wZW5haUZvcm1hdFNlcnZpY2UiLCJnZXRBdmFpbGFibGVQcm92aWRlcnMiLCJwcm92aWRlcnMiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ai-service.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@google"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproviders%2Froute&page=%2Fapi%2Fproviders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproviders%2Froute.ts&appDir=%2FUsers%2Fvyang%2FDesktop%2Fspaces%2Fmanga_learnjp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvyang%2FDesktop%2Fspaces%2Fmanga_learnjp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();